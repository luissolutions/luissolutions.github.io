<head>
    <style>
        html {
            background-image: url("https://luissolutions.github.io/websites/game/assets/img/bg.png");
            background-size: cover;
            background-attachment: fixed;
        }

        body {
            backdrop-filter: blur(3px);
            color: black;
            backdrop-filter: blur(5px);
            height: 100%;
        }
    </style>
</head>
<div class="background">
    <div class="main-content">
        <h2>Server Updates & Features</h2>
        <div class="columns">
            <!-- Update Articles -->
            <article class="card">
                <h3>Latest Server Update: New Custom Mods!</h3>
                <img src="./assets/img/new-mods.png" alt="New Mods">
                <p>Discover the latest custom mods added to our server, enhancing your gameplay experience. Learn what's
                    new and how to get started.</p>
            </article>

            <!-- Feature Articles -->
            <article class="card">
                <h3>Exclusive Server Features</h3>
                <img src="./assets/img/server-features.png" alt="Server Features">
                <p>Explore the unique features that set our server apart from the rest. From custom landscapes to unique
                    gameplay mechanics.</p>
            </article>
        </div>
    </div>
    <br>
    <div class="main-content">
        <h2>Guides & Tutorials</h2>
        <div class="rows">
            <!-- Beginner Guides -->
            <article class="card">
                <h3>Getting Started on Our Server</h3>
                <img src="./assets/img/beginner-guide.png" alt="Beginner Guide">
                <p>A comprehensive guide for newcomers. Learn how to join, navigate, and make the most of your first
                    hours on the server.</p>
            </article>

            <!-- Advanced Tutorials -->
            <article class="card">
                <h3>Mastering Custom Mods</h3>
                <img src="./assets/img/advanced-mods.png" alt="Advanced Mods">
                <p>Dive deep into our custom mods with this advanced tutorial. Enhance your gameplay with expert tips
                    and tricks.</p>
            </article>
        </div>
    </div>
    <div class="main-content">
        <h2>Minecraft Server Status</h2>
        <div class="rows">
            <article class="card">
                <div id="serverStatus25566"></div>
                <div id="serverStatus25565"></div>
            </article>

            <!-- Event Announcements -->
            <article class="card">
                <h3>Upcoming Event: Ultimate Build Challenge</h3>
                <img src="../assets/img/events/build-challenge.png" alt="Build Challenge">
                <p>Join our Ultimate Build Challenge! Showcase your skills for a chance to win exclusive rewards. Click
                    here for details.</p>
            </article>
        </div>
    </div>
</div>

<!-- Modal Structure -->
<div id="imageModal"
    style="display:none; position:fixed; z-index:10; left:0; top:0; width:100%; height:100%; background-color:rgba(0,0,0,0.5); align-items:center; justify-content:center;">
    <img id="modalImage" style="width:100%; max-width:90%;" />
</div>

<script>
    // Assuming you have images inside cards that you want to click to show in modal
    const cardImages = document.querySelectorAll('.card img');
    cardImages.forEach(img => {
        img.addEventListener('click', function () {
            showImageModal(img.getAttribute('src'));
        });
    });

    // Close Modal when clicked anywhere inside the modal
    const modal = document.getElementById('imageModal');
    if (modal) {
        modal.addEventListener('click', function () {
            this.style.display = 'none';
        });
    }

    function showImageModal(imageSrc) {
        const modalImage = document.getElementById('modalImage');
        modal.style.display = "flex";
        modalImage.src = imageSrc;
    }
</script>

<script>
    const fetchServerStatus = (hostname, port, elementId) => {
        fetch(`https://api.mcstatus.io/v2/status/java/${hostname}:${port}`)
            .then(response => response.json())
            .then(data => {
                const serverStatusElement = document.getElementById(elementId);
                let version = '';

                // Updated to check for name_clean or name_raw in the version object
                if (data.version && data.version.name_clean) {
                    version = data.version.name_clean;
                } else if (data.version && data.version.name_raw) {
                    version = data.version.name_raw;
                }

                serverStatusElement.innerHTML = `
                    <h2>Server Status (${hostname}:${port}): ${data.online ? 'Online' : 'Offline'}</h2>
                    <p>Version: ${version}</p>
                    <p>Players Online: ${data.players.online}</p>
                    <p>Max Players: ${data.players.max}</p>
                `;
            })
            .catch(error => {
                console.error(`Error fetching server status for ${hostname}:${port}:`, error);
                document.getElementById(elementId).textContent = `Error fetching server status for ${hostname}:${port}`;
            });
    };

    fetchServerStatus('kamehousemc.ddns.net', 25566, 'serverStatus25566');
    fetchServerStatus('kamehousemc.ddns.net', 25565, 'serverStatus25565');
</script>