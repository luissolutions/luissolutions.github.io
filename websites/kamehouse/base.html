<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Kame House</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="apple-touch-icon" sizes="180x180" href="img/icons/apple-touch-icon.png">
  <link rel="icon" type="img/png" sizes="32x32" href="img/icons/favicon-32x32.png">
  <link rel="icon" type="img/png" sizes="16x16" href="img/icons/favicon-16x16.png">
  <link rel="manifest" href="site.webmanifest">
  <script src="js/login.js" defer></script>
  <script src="js/index.js" defer></script>
</head>

<body>
  <div class="clock">
    <div class="time-label">Current Time</div>
    <div id="clock"></div>
  </div>
  <header>
    <div class="hamburger-box">
      <div class="hamburger" onclick="toggleMenu()">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
      </div>
    </div>
    <div class="nav-bar">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="editor.html">Editor</a></li>
        <li><a href="#">More</a></li>
        <li class="dropdown">
          <a href="#">Links</a>
          <div class="dropdown-content">
            <a href="https://chat.openai.com/" target="_blank">AI</a>
            <a href="https://firebase.google.com/" target="_blank">Firebase</a>
            <a href="https://favicon.io/favicon-converter/" target="_blank">Icon Maker</a>
            <a href="https://gitmoji.dev/" target="_blank">Gitmoji</a>
            <a href="../cpr/index.html" target="_blank">CPR App üåê</a>
          </div>
        </li>
      </ul>
    </div>
  </header>
  <main>
    <section>
      <div id="appButtons">
        <!-- Buttons will be inserted here -->
      </div>
      <iframe id="myIframe" src="#" frameBorder="0"></iframe>
    </section>
    <section>
      <input type="text" for="loadContent" id="iframeSource" placeholder="Enter app name">
      <button id="loadContent">Load Content</button>
    </section>
  </main>
  <footer>
    <ul>
      <li>¬© of <a href="../../index.html">Luis</a></li>
    </ul>
    <button id="hide">\\//</button>
  </footer>
  <script>
    var appNames = [
      "livegas",
      "livemileage",
      "livenotes",
      "reg",
      "gallery",
      "budget",
      "invoice",
      "info",
      "liveinventory",
    ];

    var pages = appNames.map(function (name) {
      return "/apps/" + name + ".html";
    });

    var iframe = document.getElementById('myIframe');
    var appButtons = document.getElementById('appButtons');
    var currentIndex = localStorage.getItem('currentIndex') || 0;

    function setIframeSrc(index) {
      currentIndex = index;
      iframe.src = pages[index];
      localStorage.setItem('currentIndex', currentIndex);
    }

    function cycleIframeSrc(isNext) {
      currentIndex = isNext ? (currentIndex + 1) % pages.length : (currentIndex - 1 + pages.length) % pages.length;
      setIframeSrc(currentIndex);
    }

    function generateButtons() {
      var buttonsHTML = `<button onclick="cycleIframeSrc(false)">‚¨ÜÔ∏è</button>`;

      appNames.forEach((name, index) => {
        buttonsHTML += `<button onclick="setIframeSrc(${index})">${name.toUpperCase()}</button>`;
      });

      buttonsHTML += `<button onclick="cycleIframeSrc(true)">‚¨áÔ∏è</button>`;

      appButtons.innerHTML = buttonsHTML;
    }

    window.onload = function () {
      setIframeSrc(currentIndex);
      generateButtons();
    }

    document.getElementById('loadContent').addEventListener('click', function () {
      var sourceName = document.getElementById('iframeSource').value;
      var fullPath = "/apps/" + sourceName + ".html";
      document.getElementById('myIframe').src = fullPath;
    });
  </script>
</body>

</html>