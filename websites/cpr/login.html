<!DOCTYPE html>
<html>

<head>
    <title>Login Page</title>
    <link href="css/styles.css" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="icon" type="img/png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="icon" type="img/png" sizes="16x16" href="img/favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
</head>

<body>
    <header>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="repair.html">Price Calc</a></li>
            <li><a href="editor.html">Price Editor</a></li>
            <li><a href="pages/more.html">Info</a></li>
            <li class="dropdown">
                <a href="javascript:void(0)">Links</a>
                <div class="dropdown-content">
                    <a href="https://cpr.parts" target="_blank">CPR Parts</a>
                    <a href="https://www.injuredgadgets.com/" target="_blank">Injured Gadgets</a>
                    <a href="https://laptopscreens.com" target="_blank">Laptop Screens</a>
                    <a href="https://gsx2.apple.com/" target="_blank">Apple GSX</a>
                    <a href="https://diagnostics.apple.com/" target="_blank">Apple Diagnostics</a>
                    <a href="https://imeicheck.com/" target="_blank">IMEI Check</a>
                    <a href="https://app.slack.com/" target="_blank">Slack</a>
                    <a href="https://webmail.cellphonerepair.com/" target="_blank">Webmail</a>
                    <a href="https://www.apple.com/shop/browse/overlay/tradein_landing/iphone_values" target="_blank">Apple Trade-in</a>
                    <a href=""><button id="logoutButton">Logout</button></a>
                </div>
            </li>
        </ul>
    </header>
    <main>
        <section>
            <div class="container">
                <h2>Login</h2>
                <br>
                <form id="login-form">
                    <label for="username">Email:</label>
                    <input type="text" id="login-username" required><br>
                    <label for="password">Password:</label>
                    <input type="password" id="login-password" required><br>
                    <input type="submit" value="Login">
                </form>
                <button id="logoutButton">Logout</button>
            </div>
        </section>
    </main>
    <footer>
        <ul>
            <li>Â© of <a href="../../index.html">Luis</a></li>
        </ul>
    </footer>

    <script type="module">
        import { auth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "../../assets/js/firebase-init.js";

        // Login form handling
        document.getElementById("login-form").addEventListener("submit", function (event) {
            event.preventDefault();
            const email = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;

            signInWithEmailAndPassword(auth, email, password)
                .then((credentials) => {
                    window.location.href = 'index.html';
                })
                .catch((error) => {
                    console.error('Login error:', error);
                    alert("Error during login: " + error.message);
                });
        });

        document.getElementById('logoutButton').addEventListener('click', () => {
            signOut(auth).then(() => {
                console.log("You have been logged out");
                // window.location.href = 'login.html';
            }).catch((error) => {
                console.error("Logout error", error);
            });
        });
    </script>

</body>

</html>
</body>

</html>