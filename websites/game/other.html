<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="assets/img/logo.png">
    <title>Pok√©mon Card Trading Hub</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <style>
        main {
            text-align: center;
            padding: 0px;
        }

        iframe {
            width: 100%;
            height: calc(100vh - var(--headerHeight) - var(--footerHeight) - 340px);
            border: 0;
        }

        .chat-container,
        #chatModal .chat-container {
            background-color: white;
            border-radius: 5px;
            padding: 10px;
            margin: 5px;
        }

        .output {
            height: 300px;
            overflow-y: auto;
        }

        .input,
        .send-btn {
            border: none;
            padding: 10px;
            width: 100%;
        }

        .input {
            margin-bottom: 5px;
        }

        .message {
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .user-message {
            text-align: right;
        }

        .ai-message {
            text-align: left;
        }

        #chatModal {
            position: fixed;
            bottom: 10px;
            right: 10px;
            height: 420px;
            background-color: #f9f9f9;
            border-radius: 5px;
            padding: 10px;
            z-index: 2;
            box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
            transition: transform 0.5s ease-in-out;
            transform: translateX(105%);
        }

        #chatModal:not(.hidden) {
            transform: translateX(0);
        }

        @media (max-width: 768px) {
            iframe {
                min-height: 800px;
            }
        }
    </style>
</head>

<body>
    <header>
        <nav>
            <ul>
                <li><a href="other.html">Home</a></li>
                <li><a href="#" data-path="pages/contact.html" onclick="loadContent(event, this.getAttribute('data-path'))">Contact</a></li>
                <li><a href="#chat" id="toggleChat">Chat</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="home">
            <img src="assets/img/logo.png" alt="">
            <h1>Welcome to the Pok√©mon Card Trading Hub</h1>
            <p>Discover, trade, and chat about your favorite Pok√©mon cards!</p>
        </section>

        <section id="main-content">
            <iframe id="contentIframe"
                src="https://gooddesignsandgraphics.com/other/apps/liveinventory.html">test</iframe>
        </section>
    </main>

    <div id="chatModal" class="hidden">
        <iframe id="chatAppIframe" src="../../apps/livechat.html"></iframe>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <a href="index.html"><img src="assets/img/mariohead.png" alt="Your Logo"></a>
            </div>
            <div class="footer-links">
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="#" data-path="pages/contact.html" onclick="loadContent(event, this.getAttribute('data-path'))">Contact</a></li>
                    <li><a href="#" data-path="pages/login.html" onclick="loadContent(event, this.getAttribute('data-path'))">Login / Signup</a></li>
                </ul>
            </div>
            <div class="footer-social">
                <ul>
                    <li><a href="https://facebook.com" target="_blank"><img src="../../assets/img/white-facebook.png"
                                alt="Facebook"></a></li>
                    <li><a href="https://twitter.com" target="_blank"><img src="../../assets/img/white-twitter.png"
                                alt="Twitter"></a>
                    </li>
                    <li><a href="http://instagram.com/louman2051" target="_blank"><img
                                src="../../assets/img/white-instagram.png" alt="Instagram"></a></li>
                    <li><a href="http://youtube.com/louman61/" target="_blank"><img
                                src="../../assets/img/white-youtube.png" alt="Youtube"></a></li>
                </ul>
            </div>
        </div>
        <div class="footer-text">
            &copy; 2024 Louman 64. All rights reserved.
        </div>
    </footer>

    <script>
        function sendChat() {
            const input = document.getElementById("chatInput");
            const output = document.getElementById("chatOutput");
            if (input.value.trim() !== "") {
                const userMsg = document.createElement("div");
                userMsg.className = "message user-message";
                userMsg.textContent = input.value;
                output.appendChild(userMsg);

                setTimeout(() => {
                    const aiMsg = document.createElement("div");
                    aiMsg.className = "message ai-message";
                    aiMsg.textContent = "Pikachu finds that interesting! üåü " + input.value;
                    output.appendChild(aiMsg);
                    output.scrollTop = output.scrollHeight;
                }, 1000);

                input.value = "";
            }
        }

        function loadContent(event, path) {
            event.preventDefault();

            fetch(path)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.text();
                })
                .then(html => {
                    const bodyContainer = document.getElementById('main-content');
                    bodyContainer.innerHTML = html;

                    // Process all scripts in the loaded content
                    const scripts = bodyContainer.querySelectorAll('script');
                    scripts.forEach(script => {
                        if (script.type === 'module') {
                            // Handle module scripts
                            const moduleScript = document.createElement('script');
                            moduleScript.type = 'module';
                            if (script.src) {
                                moduleScript.src = script.src;
                            } else {
                                moduleScript.textContent = script.textContent;
                            }
                            script.parentNode.replaceChild(moduleScript, script);
                        } else {
                            // Handle regular scripts
                            if (script.src) {
                                const newScript = document.createElement('script');
                                newScript.src = script.src;
                                script.parentNode.replaceChild(newScript, script);
                            } else {
                                eval(script.textContent);
                            }
                        }
                    });
                })
                .catch(error => {
                    console.error('There has been a problem with your fetch operation:', error);
                });
        }

        document.getElementById('toggleChat').addEventListener('click', function () {
            const chatModal = document.getElementById('chatModal');
            chatModal.classList.toggle('hidden');
            this.textContent = chatModal.classList.contains('hidden') ? 'Open Chat' : 'Close Chat';
        });

        document.getElementById('chatInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                sendChat(); // Call the sendChat function
                e.preventDefault(); // Prevent the default action to stop from submitting a form if wrapped in one
            }
        });

        document.addEventListener('click', function (e) {
            const chatModal = document.getElementById('chatModal');
            const toggleChatBtn = document.getElementById('toggleChat');
            // Check if the click is outside the chatModal and not on the toggleChatBtn
            if (!chatModal.contains(e.target) && !toggleChatBtn.contains(e.target) && !chatModal.classList.contains('hidden')) {
                chatModal.classList.add('hidden');
                toggleChatBtn.textContent = 'Open Chat';
            }
        });

        document.querySelectorAll('a[data-src]').forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                const newSrc = this.getAttribute('data-src');
                const iframe = document.getElementById('contentIframe');
                iframe.src = newSrc;
            });
        });

    </script>
</body>

</html>